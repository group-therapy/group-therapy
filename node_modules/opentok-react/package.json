{
  "_from": "opentok-react",
  "_id": "opentok-react@0.7.0",
  "_inBundle": false,
  "_integrity": "sha512-sc+dcXWCE/IlDzjmEm+xm4L83jsuF4oXUxQOjcNnQctVfvd2p+YwVkxVfCnLOLfVTwEQF43LWv0x0qCDwY8g+g==",
  "_location": "/opentok-react",
  "_phantomChildren": {},
  "_requested": {
    "escapedName": "opentok-react",
    "fetchSpec": "latest",
    "name": "opentok-react",
    "raw": "opentok-react",
    "rawSpec": "",
    "registry": true,
    "saveSpec": null,
    "type": "tag"
  },
  "_requiredBy": [
    "#USER",
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/opentok-react/-/opentok-react-0.7.0.tgz",
  "_shasum": "8d97fc8076a9c7466bd9172e8a942275f73290f6",
  "_shrinkwrap": null,
  "_spec": "opentok-react",
  "_where": "/Users/zacharylim/group-therapy",
  "author": {
    "email": "aiham@aiham.net",
    "name": "Aiham Hammami"
  },
  "browserify": {
    "transform": [
      "babelify"
    ]
  },
  "bugs": {
    "url": "https://github.com/aiham/opentok-react/issues"
  },
  "bundleDependencies": false,
  "dependencies": {
    "lodash": "^4.13.1",
    "prop-types": "^15.5.10",
    "react-display-name": "^0.2.0",
    "scriptjs": "^2.5.8",
    "uuid": "^3.0.1"
  },
  "deprecated": false,
  "description": "React components for OpenTok.js",
  "devDependencies": {
    "babel-cli": "^6.18.0",
    "babel-eslint": "^7.1.1",
    "babel-preset-es2015": "^6.9.0",
    "babel-preset-react": "^6.5.0",
    "babel-preset-stage-2": "^6.18.0",
    "babelify": "^7.3.0",
    "browserify": "^13.0.1",
    "enzyme": "^2.6.0",
    "eslint": "^3.17.1",
    "eslint-config-airbnb": "^14.1.0",
    "eslint-plugin-import": "^2.2.0",
    "eslint-plugin-jasmine": "^2.2.0",
    "eslint-plugin-jsx-a11y": "^4.0.0",
    "eslint-plugin-react": "^6.10.0",
    "jasmine-core": "^2.5.2",
    "karma": "^1.3.0",
    "karma-babel-preprocessor": "^6.0.1",
    "karma-browserify": "^5.1.0",
    "karma-chrome-launcher": "^2.0.0",
    "karma-firefox-launcher": "^1.0.0",
    "karma-jasmine": "^1.1.0",
    "karma-spec-reporter": "^0.0.26",
    "opentok-test-scripts": "^3.2.1",
    "react": "^15.5.0",
    "react-addons-test-utils": "^15.5.1",
    "react-dom": "^15.5.0",
    "react-test-renderer": "^15.5.4",
    "travis-multirunner": "^3.1.0",
    "watchify": "^3.8.0"
  },
  "homepage": "https://github.com/aiham/opentok-react#readme",
  "keywords": [
    "tokbox",
    "opentok",
    "react",
    "react-component",
    "video",
    "webrtc"
  ],
  "license": "MIT",
  "main": "dist/index.js",
  "name": "opentok-react",
  "optionalDependencies": {},
  "peerDependencies": {
    "react": "^15.5.0"
  },
  "readme": "# opentok-react\n\n[![npm version](https://badge.fury.io/js/opentok-react.svg)](https://badge.fury.io/js/opentok-react) [![Build Status](https://travis-ci.org/aiham/opentok-react.svg?branch=master)](https://travis-ci.org/aiham/opentok-react)\n\nReact components for OpenTok.js\n\n## Contents\n\n- [Pre-Requisites](#pre-requisites)\n- [Install](#install)\n- [Example App](#example-app)\n- [Usage](#usage)\n  - [Importing opentok-react](#importing-opentok-react)\n  - [Example with OTSession Component](#example-with-otsession-component)\n  - [Example with createSession Helper](#example-with-createsession-helper)\n- [API Reference](#api-reference)\n  - [OTSession Component](#otsession-component)\n  - [OTPublisher Component](#otpublisher-component)\n  - [OTStreams Component](#otstreams-component)\n  - [OTSubscriber Component](#otsubscriber-component)\n  - [createSession Helper](#createsession-helper)\n  - [preloadScript Higher-Order Component](#preloadscript-higher-order-component)\n- [Custom Build](#custom-build)\n- [Contributing](#contributing)\n- [Tests](#tests)\n\n## Pre-Requisites\n\n1. NodeJS\n1. Register a TokBox account: https://tokbox.com/account/user/signup\n\n## Install\n\nAdd `opentok-react` as a dependency of your application:\n\n```sh\nyarn add opentok-react\n```\n\nOr if you're still using npm:\n\n```sh\nnpm install --save opentok-react\n```\n\nThen include `opentok.js` before your application:\n\n```html\n<script src=\"https://static.opentok.com/v2/js/opentok.min.js\"></script>\n```\n\nAlternatively, wrap your top-level component using OpenTok with the [`preloadScript`](#preloadscript-higher-order-component) HOC. The HOC will take care of loading `opentok.js` for you before rendering.\n\n## Example App\n\nThere is an example application provided in `example/` and you can run it with the following steps:\n\n1. `git clone https://github.com/aiham/opentok-react.git`\n1. `cd opentok-react/example/`\n1. `cp config.template.js config.js`\n1. Edit `config.js`:\n  1. Add your OpenTok API key, Session ID and Token (https://tokbox.com/account/)\n  1. Add your Chrome Extension ID (https://tokbox.com/developer/guides/screen-sharing/js/)\n1. `yarn` (or `npm install`)\n1. `npm run example`\n1. Visit `http://localhost:8000` in your browser\n\nRefer to the `App.js`, `Publisher.js` and `Subscriber.js` files in `example/components/` for library usage.\n\n## Usage\n\nThe following sections explains how to import and use `opentok-react` in your React application.\n\n### Importing opentok-react\n\nImport the `opentok-react` components into your React application:\n\n```js\nimport { OTSession, OTPublisher, OTStreams, OTSubscriber } from 'opentok-react';\n```\n\nOr `require` it if you need to use CommonJS modules:\n\n```js\nconst { OTSession, OTPublisher, OTStreams, OTSubscriber } = require('opentok-react');\n```\n\n### Example with OTSession Component\n\n```js\nclass MyApp extends React.Component {\n  render() {\n    return (\n      <OTSession apiKey=\"your-api-key\" sessionId=\"your-session-id\" token=\"your-session-token\">\n        <OTPublisher />\n        <OTStreams>\n          <OTSubscriber />\n        </OTStreams>\n      </OTSession>\n    );\n  }\n}\n```\n\n### Example with createSession Helper\n\n```js\nclass MyApp extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { streams: [] };\n  }\n\n  componentWillMount() {\n    this.sessionHelper = createSession({\n      apiKey: 'your-api-key',\n      sessionId: 'your-session-id',\n      token: 'your-session-token',\n      onStreamsUpdated: streams => { this.setState({ streams }); }\n    });\n  }\n\n  componentWillUnmount() {\n    this.sessionHelper.disconnect();\n  }\n\n  render() {\n    return (\n      <div>\n        <OTPublisher session={this.sessionHelper.session} />\n\n        {this.state.streams.map(stream => {\n          return (\n            <OTSubscriber\n              key={stream.id}\n              session={this.sessionHelper.session}\n              stream={stream}\n            />\n          );\n        })}\n      </div>\n    );\n  }\n}\n```\n\n## API Reference\n\nThe `opentok-react` library comprises of:\n\n- `OTSession` Component\n- `OTPublisher` Component\n- `OTStreams` Component\n- `OTSubscriber` Component\n- `createSession` Helper\n- `preloadScript` Higher-Order Component\n\n### OTSession Component\n\n| Prop | Type | Required | Description |\n| --- | --- | --- | --- |\n| apiKey | String | Yes | TokBox API Key\n| sessionId | String | Yes | TokBox Session ID\n| token | String | Yes | TokBox token\n| eventHandlers | Object&lt;Function&gt; | No | Event handlers passed into [session.on](https://tokbox.com/developer/sdks/js/reference/Session.html#on)\n| onConnect | Function() | No | Invoked when [session.connect](https://tokbox.com/developer/sdks/js/reference/Session.html#connect) successfully completes\n| onError | Function(err) | No | Invoked when [session.connect](https://tokbox.com/developer/sdks/js/reference/Session.html#connect) fails\n\nThe `OTSession` component manages the connection to an OpenTok [Session](https://tokbox.com/developer/sdks/js/reference/Session.html). It passes the Session instance as the `session` prop to its child components. It is recommended that you nest `OTPublisher` and `OTStreams` inside `OTSession`:\n\n```html\n<OTSession apiKey=\"your-api-key\" sessionId=\"your-session-id\" token=\"your-session-token\">\n  <OTPublisher />\n  <OTStreams>\n    <OTSubscriber />\n  </OTStreams>\n</OTSession>\n```\n\n### OTPublisher Component\n\n| Prop | Type | Required | Description |\n| --- | --- | --- | --- |\n| session | [Session](https://tokbox.com/developer/sdks/js/reference/Session.html) | No | OpenTok Session instance. This is auto populated by wrapping `OTPublisher` with `OTSession`\n| properties | Object | No | Properties passed into [OT.initPublisher](https://tokbox.com/developer/sdks/js/reference/OT.html#initPublisher)\n| eventHandlers | Object&lt;Function&gt; | No | Event handlers passed into [publisher.on](https://tokbox.com/developer/sdks/js/reference/Publisher.html#on)\n| onInit | Function() | No | Invoked when [OT.initPublisher](https://tokbox.com/developer/sdks/js/reference/OT.html#initPublisher) successfully completes\n| onPublish | Function() | No | Invoked when [session.publish](https://tokbox.com/developer/sdks/js/reference/Session.html#publish) successfully completes\n| onError | Function(err) | No | Invoked when either [OT.initPublisher](https://tokbox.com/developer/sdks/js/reference/OT.html#initPublisher) or [session.publish](https://tokbox.com/developer/sdks/js/reference/Session.html#publish) fail\n\nThe `OTPublisher` component will initialise a publisher and publish to a specified session upon mounting. It will also ensure the Publisher video element is attached to the DOM inside the component rather than appending to the body (which is the Publisher's default behaviour).\n\n```html\n<OTSession apiKey=\"your-api-key\" sessionId=\"your-session-id\" token=\"your-session-token\">\n  <OTPublisher />\n</OTSession>\n```\n\nIf you are not using `OTSession` then you must specify a [Session](https://tokbox.com/developer/sdks/js/reference/Session.html) object using the `session` prop.\n\n```html\n<OTPublisher session={this.sessionHelper.session} />\n```\n\nUse the `properties` prop to specify a properties object for [OT.initPublisher](https://tokbox.com/developer/sdks/js/reference/OT.html#initPublisher) and the `eventHandlers` prop to specify an object of event handlers for [Publisher#on](https://tokbox.com/developer/sdks/js/reference/Publisher.html#on).\n\n```js\nclass MyApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.publisherProperties = {\n      audioFallbackEnabled: false,\n      showControls: false\n    };\n\n    this.publisherEventHandlers = {\n      streamCreated: event => {\n        console.log('Publisher stream created!');\n      },\n      streamDestroyed: event => {\n        console.log('Publisher stream destroyed!');\n      }\n    };\n  }\n\n  render() {\n    return (\n      <OTSession apiKey=\"your-api-key\" sessionId=\"your-session-id\" token=\"your-session-token\">\n        <OTPublisher\n          properties={this.publisherProperties}\n          eventHandlers={this.publisherEventHandlers}\n        />\n      </OTSession>\n    );\n  }\n}\n```\n\nThe `properties` prop is used for initial set up of the Publisher and making changes to it will not update the Publisher, you will instead need to invoke Publisher methods. To facilitate this the Publisher instance is exposed via the `getPublisher()` component method. You should always call this method to get the latest Publisher instance instead of keeping a reference to it as it's possible for the Publisher instance to change, leaving you with a stale reference.\n\nHowever, for convenience the `OTPublisher` does watch for changes on a few keys of the `properties` object and makes the necessary changes. Currently these are:\n\n| Publisher Property | Action |\n| --- | --- |\n| videoSource | Destroys and recreates the Publisher with the new video source. This is the only way to change the video source of a Publisher. This is used in the example application to allow the user to toggle between publishing their camera and publishing their screen |\n| publishAudio | Calls [publisher.publishAudio()](https://tokbox.com/developer/sdks/js/reference/Publisher.html#publishAudio) to toggle audio on and off |\n| publishVideo | Calls [publisher.publishVideo()](https://tokbox.com/developer/sdks/js/reference/Publisher.html#publishVideo) to toggle video on and off |\n\nThere are plans to support more Publisher properties but for now you will have to call `getPublisher()` to retrieve the Publisher instance and make the necessary changes yourself.\n\n### OTStreams Component\n\n| Prop | Type | Required | Description |\n| --- | --- | --- | --- |\n| children | ReactElement | Yes | Must have a single child component that accepts `session` and `stream` props, eg. `OTSubscriber`\n| session | [Session](https://tokbox.com/developer/sdks/js/reference/Session.html) | Yes | OpenTok Session instance. This is auto populated by wrapping `OTStreams` with `OTSession`\n| streams | Array&lt;[Stream](https://tokbox.com/developer/sdks/js/reference/Stream.html)&gt; | No | Array of OpenTok Stream instances. This is auto populated by wrapping `OTStreams` with `OTSession`\n\n### OTSubscriber Component\n\n| Prop | Type | Required | Description |\n| --- | --- | --- | --- |\n| session | [Session](https://tokbox.com/developer/sdks/js/reference/Session.html) | No | OpenTok Session instance. This is auto populated by wrapping `OTSubscriber` with `OTStreams`\n| stream | [Stream](https://tokbox.com/developer/sdks/js/reference/Stream.html) | No | OpenTok Stream instance. This is auto populated by wrapping `OTSubscriber` with `OTStreams`\n| properties | Object | No | Properties passed into `session.subscribe`\n| eventHandlers | Object&lt;Function&gt; | No | Event handlers passed into `subscriber.on`\n| onSubscribe | Function() | No | Invoked when `session.subscribe` successfully completes\n| onError | Function(err) | No | Invoked when `session.subscribe` fails\n\nThe `OTSubscriber` component will subscribe to a specified stream from a specified session upon mounting. It will also ensure the Subscriber video element is attached to the DOM inside the component rather than appending to the body (which is the Subscriber's default behaviour).\n\n```html\n<OTStreams>\n  <OTSubscriber />\n</OTStreams>\n```\n\nIf you are not using `OTStreams` then you must provide a [Stream](https://tokbox.com/developer/sdks/js/reference/Stream.html) object using the `stream` prop and a [Session](https://tokbox.com/developer/sdks/js/reference/Session.html) object using the `session` prop.\n\n```js\n{this.sessionHelper.streams.map(stream => (\n  <OTSubscriber\n    key={stream.id}\n    session={this.sessionHelper.session}\n    stream={stream}\n  />\n))}\n```\n\nUse the `properties` prop to specify a properties object for [session.subscribe](https://tokbox.com/developer/sdks/js/reference/Session.html#subscribe) and the `eventHandlers` prop to specify an object of event handlers for [Subscriber#on](https://tokbox.com/developer/sdks/js/reference/Subscriber.html#on).\n\n```js\nclass MyApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.subscriberProperties = {\n      preferredFrameRate: 15,\n      showControls: false\n    };\n\n    this.subscriberEventHandlers = {\n      videoDisabled: event => {\n        console.log('Subscriber video disabled!');\n      },\n      videoEnabled: event => {\n        console.log('Subscriber video enabled!');\n      }\n    };\n  }\n\n  render() {\n    return (\n      <OTSession apiKey=\"your-api-key\" sessionId=\"your-session-id\" token=\"your-session-token\">\n        <OTStreams>\n          <OTSubscriber\n            properties={this.subscriberProperties}\n            eventHandlers={this.subscriberEventHandlers}\n          />\n        </OTStreams>\n      </OTSession>\n    );\n  }\n}\n```\n\nThe `properties` prop is used for initial set up of the Subscriber and making changes to it will not update the Subscriber, you will instead need to invoke Subscriber methods. To facilitate this the Subscriber instance is exposed via the `getSubscriber()` component method. You should always call this method to get the latest Subscriber instance instead of keeping a reference to it as it's possible for the Subscriber instance to change, leaving you with a stale reference.\n\nHowever, for convenience the `OTSubscriber` does watch for changes on a few keys of the `properties` object and makes the necessary changes. Currently these are:\n\n| Subscriber Property | Action |\n| --- | --- |\n| subscribeToAudio | Calls [subscriber.subscribeToAudio()](https://tokbox.com/developer/sdks/js/reference/Subscriber.html#subscribeToAudio) to toggle audio on and off |\n| subscribeToVideo | Calls [subscriber.subscribeToVideo()](https://tokbox.com/developer/sdks/js/reference/Subscriber.html#subscribeToVideo) to toggle video on and off |\n\nThere are plans to support more Subscriber properties but for now you will have to call `getSubscriber()` to retrieve the Subscriber instance and make the necessary changes yourself.\n\n### createSession Helper\n\nThe `createSession` helper has been provided to easily create a session and monitor the current list of subscriber streams.\n\n```js\nclass MyApp extends React.Component {\n  componentWillMount() {\n    this.sessionHelper = createSession({\n      apiKey: 'your-api-key',\n      sessionId: 'your-session-id',\n      token: 'your-session-token',\n      onStreamsUpdated: streams => {\n        console.log('Current subscriber streams:', streams);\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    this.sessionHelper.disconnect();\n  }\n}\n```\n\nThe `createSession` helper returns an object with the following properties:\n\n- `session` - The [Session](https://tokbox.com/developer/sdks/js/reference/Session.html) instance.\n- `streams` - An up-to-date array of [Stream](https://tokbox.com/developer/sdks/js/reference/Stream.html) instances.\n- `disconnect` - A clean up function. Call this when your component unmounts.\n\nUse of this helper is optional and you can instead use the `OTSession` component or directly call [OT.initSession](https://tokbox.com/developer/sdks/js/reference/OT.html#initSession) and listen to [streamCreated](https://tokbox.com/developer/sdks/js/reference/Session.html#event:streamCreated) events if you prefer.\n\n\n### `preloadScript` Higher-Order Component\n\n| Prop | Type | Required | Description |\n| --- | --- | --- | --- |\n| opentokClientUrl | String | No | The URL of the OpenTok client script to load. It defaults to `https://static.opentok.com/v2/js/opentok.min.js`.\n| loadingDelegate | ReactElement | No | An element that will be displayed while the OpenTok client script is loading. It defaults to an empty `<div />`.\n\nIn larger applications, one might not want to load the `opentok.js` client with a `<script>` tag all the time. The `preloadScript` higher-order component will do this for you at the appropriate time.\n\nFor example, imagine you have a React Router application with the following route structure:\n\n```html\n<Router>\n  <Route path=\"/\">\n    <IndexRoute component=\"...\" />\n    <Route path=\"something\" component=\"...\" />\n    <Route path=\"video\" component={VideoChat} />\n    <Route path=\"something-else\" component=\"...\" />\n  </Route>\n</Router>\n```\n\nWhat you'd like to do is delay the loading of `opentok.js` until the `VideoChat` component is being used. Here's how you can do this:\n\n```javascript\nclass VideoChat extends React.Component {\n  // All the code of your component\n}\n\nexport default preloadScript(App);\n```\n\n## Custom Build\n\n1. `git clone https://github.com/aiham/opentok-react.git`\n1. `cd opentok-react/`\n1. `yarn` (or `npm install`)\n1. Modify code in `src/`\n1. `npm run build`\n1. Check that files in `dist/` have been updated.\n\n## Contributing\n\nIf you make changes to the project that you would like to contribute back then please follow the [contributing guidelines](CONTRIBUTING.md). All contributions are greatly appreciated!\n\n## Tests\n\nRun the unit tests locally with the following command:\n\n```\nnpm run unit\n```\n\nBy default this will launch the Chrome browser. To run tests in Firefox use:\n\n```\nnpm run unit -- --browsers Firefox\n```\n\nRun the linter with:\n\n```\nnpm run lint\n```\n\nThe unit tests are automatically run on [Travis](https://travis-ci.org/aiham/opentok-react) on both Chrome and Firefox and the current build status is shown at the top of this document.\n",
  "readmeFilename": "README.md",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/aiham/opentok-react.git"
  },
  "scripts": {
    "build": "babel src --out-dir dist",
    "example": "cd example && browserify -o bundle.js app.js && python -m SimpleHTTPServer",
    "lint": "eslint src test",
    "prepublish": "npm run build",
    "test": "karma start",
    "unit": "karma start --single-run"
  },
  "version": "0.7.0"
}
